#-----------------------------------------------------------
# Vivado v2020.2 (64-bit)
# SW Build 3064766 on Wed Nov 18 09:12:47 MST 2020
# IP Build 3064653 on Wed Nov 18 14:17:31 MST 2020
# Start of session at: Wed Jan 15 20:18:27 2020
# Process ID: 24035
# Current directory: /home/steffen/uni/Embedded-Systems_MiniProject2022/MPSoC4Drones
# Command line: vivado ./hdl/projects/u96v2_sbc_mp4d_2020_2/u96v2_sbc_mp4d.xpr
# Log file: /home/steffen/uni/Embedded-Systems_MiniProject2022/MPSoC4Drones/vivado.log
# Journal file: /home/steffen/uni/Embedded-Systems_MiniProject2022/MPSoC4Drones/vivado.jou
#-----------------------------------------------------------
start_gui
open_project ./hdl/projects/u96v2_sbc_mp4d_2020_2/u96v2_sbc_mp4d.xpr
update_compile_order -fileset sources_1
add_files -norecurse {/home/steffen/uni/Embedded-Systems_MiniProject2022/MPSoC4Drones/src/fix_address.vhd /home/steffen/uni/Embedded-Systems_MiniProject2022/MPSoC4Drones/src/nn_ctrl.vhd /home/steffen/uni/Embedded-Systems_MiniProject2022/MPSoC4Drones/src/not_gate.vhd}
update_compile_order -fileset sources_1
open_bd_design {/home/steffen/uni/Embedded-Systems_MiniProject2022/MPSoC4Drones/hdl/projects/u96v2_sbc_mp4d_2020_2/u96v2_sbc_mp4d.srcs/sources_1/bd/u96v2_sbc_mp4d/u96v2_sbc_mp4d.bd}
startgroup
create_bd_cell -type ip -vlnv xilinx.com:hls:nn_inference:1.0 nn_inference_0
endgroup
set_property location {2 763 -136} [get_bd_cells nn_inference_0]
set_property location {2 620 -298} [get_bd_cells nn_inference_0]
apply_bd_automation -rule xilinx.com:bd_rule:clkrst -config { Clk {/zynq_ultra_ps_e_0/pl_clk0 (100 MHz)} Freq {100} Ref_Clk0 {} Ref_Clk1 {} Ref_Clk2 {}}  [get_bd_pins nn_inference_0/ap_clk]
delete_bd_objs [get_bd_nets rst_ps8_0_100M_peripheral_reset]
create_bd_cell -type module -reference not_gate not_gate_0
connect_bd_net [get_bd_pins nn_inference_0/ap_rst] [get_bd_pins not_gate_0/o_out]
set_property location {2 324 -247} [get_bd_cells not_gate_0]
set_property range 32K [get_bd_addr_segs {zynq_ultra_ps_e_0/Data/SEG_axi_bram_ctrl_0_Mem0}]
save_bd_design
update_compile_order -fileset sources_1
copy_bd_objs /  [get_bd_cells {axi_bram_ctrl_0}]
set_property location {5 1652 -144} [get_bd_cells axi_bram_ctrl_1]
copy_bd_objs /  [get_bd_cells {axi_bram_ctrl_0_bram}]
set_property location {6 1851 -124} [get_bd_cells axi_bram_ctrl_0_bram1]
connect_bd_intf_net [get_bd_intf_pins axi_bram_ctrl_1/BRAM_PORTA] [get_bd_intf_pins axi_bram_ctrl_0_bram1/BRAM_PORTA]
set_property location {5 1617 -84} [get_bd_cells axi_bram_ctrl_1]
apply_bd_automation -rule xilinx.com:bd_rule:axi4 -config { Clk_master {/zynq_ultra_ps_e_0/pl_clk0 (100 MHz)} Clk_slave {Auto} Clk_xbar {/zynq_ultra_ps_e_0/pl_clk0 (100 MHz)} Master {/zynq_ultra_ps_e_0/M_AXI_HPM0_FPD} Slave {/axi_bram_ctrl_1/S_AXI} ddr_seg {Auto} intc_ip {/axi_smc} master_apm {0}}  [get_bd_intf_pins axi_bram_ctrl_1/S_AXI]
set_property location {6 1874 -416} [get_bd_cells axi_bram_ctrl_0_bram]
set_property location {6 1899 -99} [get_bd_cells axi_bram_ctrl_0_bram1]
create_bd_cell -type module -reference fix_address fix_address_0
connect_bd_net [get_bd_pins nn_inference_0/input_img_address0] [get_bd_pins fix_address_0/addr_in]
startgroup
set_property -dict [list CONFIG.nn_address_output_width {10}] [get_bd_cells fix_address_0]
endgroup
create_bd_cell -type module -reference nn_ctrl nn_ctrl_0
set_property location {4 1453 -399} [get_bd_cells nn_ctrl_0]
connect_bd_net [get_bd_pins nn_ctrl_0/i_Clk] [get_bd_pins zynq_ultra_ps_e_0/pl_clk0]
connect_bd_net [get_bd_pins axi_bram_ctrl_0_bram1/clkb] [get_bd_pins zynq_ultra_ps_e_0/pl_clk0]
connect_bd_net [get_bd_pins axi_bram_ctrl_0_bram/rstb_busy] [get_bd_pins nn_ctrl_0/rstb_busy]
connect_bd_net [get_bd_pins nn_ctrl_0/inp_addres] [get_bd_pins axi_bram_ctrl_0_bram/addrb]
connect_bd_net [get_bd_pins nn_ctrl_0/inp_din] [get_bd_pins axi_bram_ctrl_0_bram/dinb]
connect_bd_net [get_bd_pins nn_ctrl_0/inp_we] [get_bd_pins axi_bram_ctrl_0_bram/web]
connect_bd_net [get_bd_pins nn_ctrl_0/inp_enb] [get_bd_pins axi_bram_ctrl_0_bram/enb]
connect_bd_net [get_bd_pins nn_ctrl_0/inp_rst] [get_bd_pins axi_bram_ctrl_0_bram/rstb]
connect_bd_net [get_bd_pins nn_inference_0/input_img_ce0] [get_bd_pins nn_ctrl_0/prediction]
set_property location {3 1015 -151} [get_bd_cells not_gate_0]
connect_bd_net [get_bd_pins nn_ctrl_0/ap_rst] [get_bd_pins not_gate_0/i_in]
connect_bd_net [get_bd_pins nn_ctrl_0/ap_start] [get_bd_pins nn_inference_0/ap_start]
connect_bd_net [get_bd_pins nn_ctrl_0/ap_ready] [get_bd_pins nn_inference_0/ap_ready]
connect_bd_net [get_bd_pins nn_ctrl_0/ap_done] [get_bd_pins nn_inference_0/ap_done]
connect_bd_net [get_bd_pins nn_ctrl_0/ap_idle] [get_bd_pins nn_inference_0/ap_idle]
connect_bd_net [get_bd_pins fix_address_0/addr_out] [get_bd_pins nn_ctrl_0/nn_int_add]
connect_bd_net [get_bd_pins axi_bram_ctrl_0_bram1/doutb] [get_bd_pins nn_ctrl_0/out_dout]
delete_bd_objs [get_bd_nets nn_inference_0_input_img_ce0]
connect_bd_net [get_bd_pins nn_ctrl_0/nn_enb] [get_bd_pins nn_inference_0/input_img_ce0]
connect_bd_net [get_bd_pins nn_inference_0/ap_return] [get_bd_pins nn_ctrl_0/prediction]
set_property range 32K [get_bd_addr_segs {zynq_ultra_ps_e_0/Data/SEG_axi_bram_ctrl_1_Mem0}]
save_bd_design
update_compile_order -fileset sources_1
connect_bd_net [get_bd_pins axi_bram_ctrl_0_bram1/addrb] [get_bd_pins nn_ctrl_0/out_addres]
connect_bd_net [get_bd_pins nn_ctrl_0/out_din] [get_bd_pins axi_bram_ctrl_0_bram1/dinb]
connect_bd_net [get_bd_pins axi_bram_ctrl_0_bram1/enb] [get_bd_pins nn_ctrl_0/out_enb]
connect_bd_net [get_bd_pins nn_ctrl_0/out_rst] [get_bd_pins axi_bram_ctrl_0_bram1/rstb]
connect_bd_net [get_bd_pins axi_bram_ctrl_0_bram1/web] [get_bd_pins nn_ctrl_0/out_we]
connect_bd_net [get_bd_pins axi_bram_ctrl_0_bram/doutb] [get_bd_pins nn_inference_0/input_img_q0]
regenerate_bd_layout
save_bd_design
validate_bd_design
save_bd_design
